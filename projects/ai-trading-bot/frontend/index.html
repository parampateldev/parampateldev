<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Bot - Advanced Algorithmic Trading</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #06b6d4, #8b5cf6, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            color: #a0a0a0;
            margin-bottom: 20px;
        }

        .project-description {
            background: rgba(255, 255, 255, 0.03);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .project-description h3 {
            color: #06b6d4;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-card h4 {
            color: #8b5cf6;
            margin-bottom: 10px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.2);
        }

        .card h3 {
            color: #06b6d4;
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #a0a0a0;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #e0e0e0;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2);
        }

        .btn {
            background: linear-gradient(45deg, #06b6d4, #8b5cf6);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ef4444, #dc2626);
        }

        .btn-success {
            background: linear-gradient(45deg, #10b981, #059669);
        }

        .market-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .market-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .market-item .label {
            font-size: 0.9rem;
            color: #a0a0a0;
            margin-bottom: 5px;
        }

        .market-item .value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #06b6d4;
        }

        .market-item .change {
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .change.positive {
            color: #10b981;
        }

        .change.negative {
            color: #ef4444;
        }

        .prediction-result {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #06b6d4;
        }

        .backtest-results {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .portfolio-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .trade-history {
            max-height: 300px;
            overflow-y: auto;
        }

        .trade-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trade-action {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .trade-action.buy {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .trade-action.sell {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .loading {
            text-align: center;
            color: #06b6d4;
            font-style: italic;
        }

        .footer {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .github-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #e0e0e0;
            text-decoration: none;
            padding: 8px 16px;
            border: 1px solid #444;
            border-radius: 6px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .github-link:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #666;
            color: #fff;
            transform: translateY(-2px);
        }

        .github-link svg {
            fill: currentColor;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ¤– AI Trading Bot</h1>
            <p>Advanced Algorithmic Trading Platform</p>
        </div>

        <div class="project-description">
            <h3>About This Project</h3>
            <p>This AI Trading Bot leverages machine learning algorithms to predict market movements and execute automated trading strategies. It combines LSTM neural networks, technical analysis, and risk management to optimize trading performance.</p>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>ðŸ§  Machine Learning Models</h4>
                    <p>LSTM neural networks, Random Forest, and SVM for price prediction with high accuracy.</p>
                </div>
                <div class="feature-card">
                    <h4>ðŸ“Š Technical Analysis</h4>
                    <p>RSI, MACD, Bollinger Bands, and Moving Averages for comprehensive market analysis.</p>
                </div>
                <div class="feature-card">
                    <h4>âš¡ Automated Trading</h4>
                    <p>Real-time trade execution with risk management and position sizing algorithms.</p>
                </div>
                <div class="feature-card">
                    <h4>ðŸ“ˆ Backtesting</h4>
                    <p>Historical performance analysis to validate trading strategies before live deployment.</p>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <!-- Market Data Card -->
            <div class="card">
                <h3>ðŸ“Š Live Market Data</h3>
                <div class="form-group">
                    <label>Symbol</label>
                    <select id="symbolSelect">
                        <option value="AAPL">AAPL - Apple</option>
                        <option value="GOOGL">GOOGL - Google</option>
                        <option value="MSFT">MSFT - Microsoft</option>
                        <option value="TSLA">TSLA - Tesla</option>
                        <option value="NVDA">NVDA - NVIDIA</option>
                    </select>
                </div>
                <button class="btn" onclick="loadMarketData()">Refresh Market Data</button>
                <div id="marketData"></div>
            </div>

            <!-- AI Prediction Card -->
            <div class="card">
                <h3>ðŸ”® AI Price Prediction</h3>
                <div class="form-group">
                    <label>Symbol</label>
                    <select id="predictSymbol">
                        <option value="AAPL">AAPL - Apple</option>
                        <option value="GOOGL">GOOGL - Google</option>
                        <option value="MSFT">MSFT - Microsoft</option>
                        <option value="TSLA">TSLA - Tesla</option>
                        <option value="NVDA">NVDA - NVIDIA</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Strategy</label>
                    <select id="strategySelect">
                        <option value="LSTM Neural Network">LSTM Neural Network</option>
                        <option value="Random Forest">Random Forest</option>
                        <option value="Support Vector Machine">Support Vector Machine</option>
                        <option value="Moving Average Crossover">Moving Average Crossover</option>
                        <option value="RSI Mean Reversion">RSI Mean Reversion</option>
                    </select>
                </div>
                <button class="btn" onclick="getPrediction()">Get AI Prediction</button>
                <div id="predictionResult"></div>
            </div>

            <!-- Backtesting Card -->
            <div class="card">
                <h3>ðŸ“ˆ Strategy Backtesting</h3>
                <div class="form-group">
                    <label>Symbol</label>
                    <select id="backtestSymbol">
                        <option value="AAPL">AAPL - Apple</option>
                        <option value="GOOGL">GOOGL - Google</option>
                        <option value="MSFT">MSFT - Microsoft</option>
                        <option value="TSLA">TSLA - Tesla</option>
                        <option value="NVDA">NVDA - NVIDIA</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Strategy</label>
                    <select id="backtestStrategy">
                        <option value="LSTM Neural Network">LSTM Neural Network</option>
                        <option value="Random Forest">Random Forest</option>
                        <option value="Support Vector Machine">Support Vector Machine</option>
                        <option value="Moving Average Crossover">Moving Average Crossover</option>
                        <option value="RSI Mean Reversion">RSI Mean Reversion</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Period (Days)</label>
                    <input type="number" id="backtestDays" value="30" min="7" max="365">
                </div>
                <button class="btn" onclick="runBacktest()">Run Backtest</button>
                <div id="backtestResults"></div>
            </div>

            <!-- Trading Card -->
            <div class="card">
                <h3>ðŸ’¹ Execute Trade</h3>
                <div class="form-group">
                    <label>Symbol</label>
                    <select id="tradeSymbol">
                        <option value="AAPL">AAPL - Apple</option>
                        <option value="GOOGL">GOOGL - Google</option>
                        <option value="MSFT">MSFT - Microsoft</option>
                        <option value="TSLA">TSLA - Tesla</option>
                        <option value="NVDA">NVDA - NVIDIA</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Action</label>
                    <select id="tradeAction">
                        <option value="BUY">BUY</option>
                        <option value="SELL">SELL</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantity</label>
                    <input type="number" id="tradeQuantity" value="10" min="1">
                </div>
                <div class="form-group">
                    <label>Price</label>
                    <input type="number" id="tradePrice" step="0.01" placeholder="Current Market Price">
                </div>
                <button class="btn btn-success" onclick="executeTrade()">Execute Trade</button>
                <div id="tradeResult"></div>
            </div>

            <!-- Portfolio Card -->
            <div class="card">
                <h3>ðŸ’¼ Portfolio Status</h3>
                <button class="btn" onclick="loadPortfolio()">Refresh Portfolio</button>
                <div id="portfolioData"></div>
            </div>

            <!-- Trade History Card -->
            <div class="card">
                <h3>ðŸ“‹ Trade History</h3>
                <button class="btn" onclick="loadTradeHistory()">Load History</button>
                <div id="tradeHistory" class="trade-history"></div>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2025 Param Patel</p>
            <a href="https://github.com/parampateldev" target="_blank" class="github-link">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                GitHub
            </a>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8002';

        async function loadMarketData() {
            const symbol = document.getElementById('symbolSelect').value;
            try {
                const response = await fetch(`${API_BASE}/api/market-data/${symbol}`);
                const data = await response.json();
                
                if (data.success) {
                    const market = data.data;
                    document.getElementById('marketData').innerHTML = `
                        <div class="market-data">
                            <div class="market-item">
                                <div class="label">Price</div>
                                <div class="value">$${market.price}</div>
                            </div>
                            <div class="market-item">
                                <div class="label">Change</div>
                                <div class="value ${market.change >= 0 ? 'positive' : 'negative'}">
                                    ${market.change >= 0 ? '+' : ''}${market.change_percent}%
                                </div>
                            </div>
                            <div class="market-item">
                                <div class="label">Volume</div>
                                <div class="value">${market.volume.toLocaleString()}</div>
                            </div>
                            <div class="market-item">
                                <div class="label">High</div>
                                <div class="value">$${market.high}</div>
                            </div>
                            <div class="market-item">
                                <div class="label">Low</div>
                                <div class="value">$${market.low}</div>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                document.getElementById('marketData').innerHTML = `<div class="loading">Error loading market data</div>`;
            }
        }

        async function getPrediction() {
            const symbol = document.getElementById('predictSymbol').value;
            const strategy = document.getElementById('strategySelect').value;
            
            try {
                const response = await fetch(`${API_BASE}/api/predict`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ symbol, strategy })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const pred = data.prediction;
                    document.getElementById('predictionResult').innerHTML = `
                        <div class="prediction-result">
                            <h4>${pred.strategy}</h4>
                            <p><strong>Current Price:</strong> $${pred.current_price}</p>
                            <p><strong>Predicted Price:</strong> $${pred.predicted_price}</p>
                            <p><strong>Direction:</strong> <span class="${pred.direction === 'BUY' ? 'positive' : 'negative'}">${pred.direction}</span></p>
                            <p><strong>Confidence:</strong> ${(pred.confidence * 100).toFixed(1)}%</p>
                        </div>
                    `;
                }
            } catch (error) {
                document.getElementById('predictionResult').innerHTML = `<div class="loading">Error getting prediction</div>`;
            }
        }

        async function runBacktest() {
            const symbol = document.getElementById('backtestSymbol').value;
            const strategy = document.getElementById('backtestStrategy').value;
            const days = document.getElementById('backtestDays').value;
            
            try {
                const response = await fetch(`${API_BASE}/api/backtest`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ symbol, strategy, days: parseInt(days) })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const results = data.results;
                    document.getElementById('backtestResults').innerHTML = `
                        <div class="backtest-results">
                            <h4>${results.strategy} - ${results.symbol}</h4>
                            <p><strong>Period:</strong> ${results.period_days} days</p>
                            <p><strong>Return:</strong> <span class="${results.return_percent >= 0 ? 'positive' : 'negative'}">${results.return_percent}%</span></p>
                            <p><strong>Win Rate:</strong> ${(results.win_rate * 100).toFixed(1)}%</p>
                            <p><strong>Max Drawdown:</strong> ${(results.max_drawdown * 100).toFixed(1)}%</p>
                            <p><strong>Total Trades:</strong> ${results.total_trades}</p>
                        </div>
                    `;
                }
            } catch (error) {
                document.getElementById('backtestResults').innerHTML = `<div class="loading">Error running backtest</div>`;
            }
        }

        async function executeTrade() {
            const symbol = document.getElementById('tradeSymbol').value;
            const action = document.getElementById('tradeAction').value;
            const quantity = parseInt(document.getElementById('tradeQuantity').value);
            const price = parseFloat(document.getElementById('tradePrice').value);
            
            if (!price || price <= 0) {
                alert('Please enter a valid price');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE}/api/trade`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ symbol, action, quantity, price })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const trade = data.trade;
                    document.getElementById('tradeResult').innerHTML = `
                        <div class="prediction-result">
                            <h4>Trade ${trade.status}</h4>
                            <p><strong>Symbol:</strong> ${trade.symbol}</p>
                            <p><strong>Action:</strong> ${trade.action}</p>
                            <p><strong>Quantity:</strong> ${trade.quantity}</p>
                            <p><strong>Price:</strong> $${trade.price}</p>
                            <p><strong>Total:</strong> $${(trade.quantity * trade.price).toFixed(2)}</p>
                        </div>
                    `;
                    loadPortfolio();
                    loadTradeHistory();
                }
            } catch (error) {
                document.getElementById('tradeResult').innerHTML = `<div class="loading">Error executing trade</div>`;
            }
        }

        async function loadPortfolio() {
            try {
                const response = await fetch(`${API_BASE}/api/portfolio`);
                const data = await response.json();
                
                if (data.success) {
                    const portfolio = data.portfolio;
                    document.getElementById('portfolioData').innerHTML = `
                        <div class="portfolio-summary">
                            <div class="market-item">
                                <div class="label">Cash</div>
                                <div class="value">$${portfolio.cash.toFixed(2)}</div>
                            </div>
                            <div class="market-item">
                                <div class="label">Total Value</div>
                                <div class="value">$${portfolio.total_value.toFixed(2)}</div>
                            </div>
                            <div class="market-item">
                                <div class="label">Total Return</div>
                                <div class="value ${portfolio.return_percent >= 0 ? 'positive' : 'negative'}">
                                    ${portfolio.return_percent >= 0 ? '+' : ''}${portfolio.return_percent.toFixed(2)}%
                                </div>
                            </div>
                        </div>
                        <div class="trade-history">
                            <h4>Positions:</h4>
                            ${Object.keys(portfolio.positions).length > 0 ? 
                                Object.entries(portfolio.positions).map(([symbol, qty]) => 
                                    `<div class="trade-item">
                                        <span>${symbol}</span>
                                        <span>${qty} shares</span>
                                    </div>`
                                ).join('') : 
                                '<p>No positions</p>'
                            }
                        </div>
                    `;
                }
            } catch (error) {
                document.getElementById('portfolioData').innerHTML = `<div class="loading">Error loading portfolio</div>`;
            }
        }

        async function loadTradeHistory() {
            try {
                const response = await fetch(`${API_BASE}/api/trade-history`);
                const data = await response.json();
                
                if (data.success) {
                    const trades = data.trades;
                    document.getElementById('tradeHistory').innerHTML = trades.length > 0 ? 
                        trades.slice(-10).reverse().map(trade => `
                            <div class="trade-item">
                                <div>
                                    <span class="trade-action ${trade.action.toLowerCase()}">${trade.action}</span>
                                    <strong>${trade.symbol}</strong>
                                </div>
                                <div>
                                    <div>${trade.quantity} @ $${trade.price}</div>
                                    <small>${new Date(trade.timestamp).toLocaleString()}</small>
                                </div>
                                <div>
                                    <small class="${trade.status === 'EXECUTED' ? 'positive' : 'negative'}">${trade.status}</small>
                                </div>
                            </div>
                        `).join('') : 
                        '<p>No trades yet</p>';
                }
            } catch (error) {
                document.getElementById('tradeHistory').innerHTML = `<div class="loading">Error loading trade history</div>`;
            }
        }

        // Load initial data
        window.onload = function() {
            loadMarketData();
            loadPortfolio();
            loadTradeHistory();
        };
    </script>
</body>
</html>

